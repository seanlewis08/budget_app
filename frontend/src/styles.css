/* Budget App — Global Styles */

:root {
  --bg-primary: #0f1117;
  --bg-secondary: #1a1d27;
  --bg-card: #222633;
  --bg-hover: #2a2e3d;
  --text-primary: #e8eaed;
  --text-secondary: #9aa0a6;
  --text-muted: #6b7280;
  --accent: #60a5fa;
  --accent-hover: #3b82f6;
  --green: #34d399;
  --green-bg: rgba(52, 211, 153, 0.1);
  --yellow: #fbbf24;
  --yellow-bg: rgba(251, 191, 36, 0.1);
  --red: #f87171;
  --red-bg: rgba(248, 113, 113, 0.1);
  --border: #2d3244;
  --radius: 8px;
  --radius-lg: 12px;
  --shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', sans-serif;
  background: var(--bg-primary);
  color: var(--text-primary);
  line-height: 1.5;
}

/* Layout */
.app {
  display: flex;
  min-height: 100vh;
}

.sidebar {
  width: 240px;
  background: var(--bg-secondary);
  border-right: 1px solid var(--border);
  padding: 20px 0;
  display: flex;
  flex-direction: column;
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
}

.sidebar-logo {
  padding: 0 20px 20px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 12px;
}

.sidebar-logo h1 {
  font-size: 20px;
  font-weight: 700;
  color: var(--accent);
}

.sidebar-logo p {
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 2px;
}

.nav-links {
  list-style: none;
  padding: 0 8px;
}

.nav-links li {
  margin-bottom: 2px;
}

.nav-links a {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: var(--radius);
  color: var(--text-secondary);
  text-decoration: none;
  font-size: 14px;
  font-weight: 500;
  transition: all 0.15s;
}

.nav-links a:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.nav-links a.active {
  background: rgba(96, 165, 250, 0.1);
  color: var(--accent);
}

.badge {
  background: var(--red);
  color: white;
  font-size: 11px;
  font-weight: 700;
  padding: 1px 6px;
  border-radius: 10px;
  margin-left: auto;
}

.main-content {
  margin-left: 240px;
  flex: 1;
  padding: 24px 32px;
  min-height: 100vh;
  max-width: calc(100vw - 240px);
  overflow-x: hidden;
}

/* Page Header */
.page-header {
  margin-bottom: 24px;
  min-width: 0;
}

.page-header h2 {
  font-size: 24px;
  font-weight: 700;
  margin-bottom: 4px;
}

.page-header p {
  color: var(--text-secondary);
  font-size: 14px;
}

/* Month Input */
.month-input {
  background: var(--bg);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 6px 10px;
  font-size: 14px;
  cursor: pointer;
  color-scheme: dark;
}
.month-input:hover {
  border-color: var(--accent);
}
.month-input:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(96, 165, 250, 0.25);
}

/* Stats Row */
.stats-row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin-bottom: 24px;
}

.stat-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 20px;
}

.stat-card .label {
  font-size: 13px;
  color: var(--text-muted);
  margin-bottom: 4px;
}

.stat-card .value {
  font-size: 28px;
  font-weight: 700;
}

.stat-card .value.green { color: var(--green); }
.stat-card .value.yellow { color: var(--yellow); }
.stat-card .value.red { color: var(--red); }
.stat-card .value.blue { color: var(--accent); }

/* Cards */
.card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 20px;
  margin-bottom: 16px;
  min-width: 0;
  overflow: hidden;
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  min-width: 0;
  flex-wrap: wrap;
  gap: 8px;
}

.card-header h3 {
  font-size: 16px;
  font-weight: 600;
}

/* Review Queue */
.review-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-width: 0;
  overflow: hidden;
}

.review-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  transition: border-color 0.15s;
  flex-wrap: nowrap;
  overflow: hidden;
  min-width: 0;
}

.review-item:hover {
  border-color: var(--accent);
}

.review-item .date {
  font-size: 11px;
  color: var(--text-muted);
  width: 72px;
  flex-shrink: 0;
  white-space: nowrap;
}

.review-item .description {
  flex: 1;
  min-width: 0;
  font-size: 13px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.review-item .amount {
  font-size: 12px;
  font-weight: 600;
  width: 70px;
  text-align: right;
  flex-shrink: 0;
}

.review-item .amount.expense { color: var(--red); }
.review-item .amount.income { color: var(--green); }

.review-item .predicted {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: var(--text-secondary);
  background: var(--bg-primary);
  padding: 4px 10px;
  border-radius: 4px;
  width: 140px;
  flex-shrink: 0;
}

.review-item .account-tag {
  font-size: 10px;
  color: var(--text-muted);
  background: var(--bg-primary);
  padding: 2px 5px;
  border-radius: 4px;
  flex-shrink: 0;
  max-width: 70px;
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.review-item .actions {
  display: flex;
  gap: 6px;
  flex-shrink: 0;
}

.review-item .btn {
  padding: 3px 8px;
  font-size: 11px;
}

/* Buttons */
.btn {
  border: none;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  padding: 6px 12px;
  transition: all 0.15s;
}

.btn-confirm {
  background: var(--green-bg);
  color: var(--green);
  border: 1px solid rgba(52, 211, 153, 0.3);
}

.btn-confirm:hover {
  background: rgba(52, 211, 153, 0.2);
}

.btn-primary {
  background: var(--accent);
  color: white;
}

.btn-primary:hover {
  background: var(--accent-hover);
}

.btn-secondary {
  background: var(--bg-hover);
  color: var(--text-secondary);
  border: 1px solid var(--border);
}

.btn-secondary:hover {
  background: var(--bg-card);
  color: var(--text-primary);
}

.btn-danger {
  background: rgba(248, 113, 113, 0.15);
  color: var(--red);
  border: 1px solid rgba(248, 113, 113, 0.3);
}

.btn-danger:hover {
  background: rgba(248, 113, 113, 0.25);
}

.btn-danger-outline {
  background: transparent;
  color: var(--red);
  border: 1px solid rgba(248, 113, 113, 0.3);
  padding: 4px 6px;
}

.btn-danger-outline:hover {
  background: rgba(248, 113, 113, 0.12);
}

.settings-link-card {
  transition: background 0.15s, border-color 0.15s;
}

.settings-link-card:hover {
  border-color: var(--accent);
  background: var(--card-hover, rgba(99, 102, 241, 0.04));
}

.data-cell-actions {
  text-align: center;
  padding: 4px;
}

.data-cell-actions .btn-icon {
  opacity: 0.3;
  transition: opacity 0.15s;
}

.data-row:hover .data-cell-actions .btn-icon {
  opacity: 0.7;
}

.data-cell-actions .btn-icon:hover {
  opacity: 1;
}

/* Deleted Transactions (Settings) */
.deleted-count-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 20px;
  height: 20px;
  padding: 0 6px;
  margin-left: 8px;
  border-radius: 10px;
  background: rgba(248, 113, 113, 0.15);
  color: var(--red);
  font-size: 11px;
  font-weight: 600;
}

.deleted-at-cell {
  font-size: 12px;
  color: var(--text-muted);
  white-space: nowrap;
}

.deleted-restore-btn {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  background: rgba(96, 165, 250, 0.1);
  color: var(--accent);
  border: 1px solid rgba(96, 165, 250, 0.25);
  font-size: 11px;
  padding: 4px 10px;
  border-radius: 4px;
  cursor: pointer;
  white-space: nowrap;
  transition: background 0.15s;
}

.deleted-restore-btn:hover {
  background: rgba(96, 165, 250, 0.2);
}

.deleted-restore-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Category Select Dropdown */
.category-select {
  background: var(--bg-primary);
  color: var(--text-primary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 6px 10px;
  font-size: 13px;
  cursor: pointer;
  min-width: 140px;
}

.category-select:focus {
  outline: none;
  border-color: var(--accent);
}

/* File Upload */
.upload-zone {
  border: 2px dashed var(--border);
  border-radius: var(--radius-lg);
  padding: 40px;
  text-align: center;
  cursor: pointer;
  transition: all 0.15s;
}

.upload-zone:hover {
  border-color: var(--accent);
  background: rgba(96, 165, 250, 0.05);
}

.upload-zone .icon {
  font-size: 40px;
  margin-bottom: 12px;
}

.upload-zone p {
  color: var(--text-secondary);
  font-size: 14px;
}

/* Transaction Table */
.txn-table {
  width: 100%;
  border-collapse: collapse;
}

.txn-table th {
  text-align: left;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
}

.txn-table td {
  padding: 10px 12px;
  font-size: 14px;
  border-bottom: 1px solid var(--border);
}

.txn-table tr:hover td {
  background: var(--bg-hover);
}

/* Budget Progress */
.budget-item {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 12px 0;
  border-bottom: 1px solid var(--border);
}

.budget-item:last-child {
  border-bottom: none;
}

.budget-bar-container {
  flex: 1;
}

.budget-bar-label {
  display: flex;
  justify-content: space-between;
  font-size: 13px;
  margin-bottom: 4px;
}

.budget-bar {
  height: 8px;
  background: var(--bg-primary);
  border-radius: 4px;
  overflow: hidden;
}

.budget-bar-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.3s;
}

.budget-bar-fill.green { background: var(--green); }
.budget-bar-fill.yellow { background: var(--yellow); }
.budget-bar-fill.red { background: var(--red); }

/* Settings */
.settings-group {
  margin-bottom: 24px;
}

.settings-group label {
  display: block;
  font-size: 13px;
  color: var(--text-secondary);
  margin-bottom: 6px;
}

.settings-group input,
.settings-group select {
  background: var(--bg-primary);
  color: var(--text-primary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 8px 12px;
  font-size: 14px;
  width: 100%;
  max-width: 400px;
}

.settings-group input:focus,
.settings-group select:focus {
  outline: none;
  border-color: var(--accent);
}

.settings-row {
  display: flex;
  gap: 16px;
}

.settings-source-badge {
  font-size: 10px;
  font-weight: 500;
  padding: 1px 6px;
  border-radius: 4px;
  margin-left: 6px;
  vertical-align: middle;
}

.settings-source-badge.db {
  background: var(--green-bg);
  color: var(--green);
}

.settings-source-badge.env {
  background: rgba(96, 165, 250, 0.1);
  color: var(--accent);
}

.settings-source-badge.none {
  background: var(--bg-hover);
  color: var(--text-muted);
}

/* Empty State */
.empty-state {
  text-align: center;
  padding: 60px 20px;
  color: var(--text-muted);
}

.empty-state .icon {
  font-size: 48px;
  margin-bottom: 16px;
}

.empty-state h3 {
  font-size: 18px;
  margin-bottom: 8px;
  color: var(--text-secondary);
}

.empty-state p {
  font-size: 14px;
  max-width: 400px;
  margin: 0 auto;
}

/* ─── Review Category Area ─── */
.review-category-area {
  flex-shrink: 1;
  position: relative;
  display: flex;
  align-items: center;
  width: 220px;
  min-width: 140px;
  justify-content: flex-end;
}

/* ─── Predicted Category Group ─── */
.predicted-group {
  display: flex;
  align-items: center;
  gap: 6px;
}

.predicted-label {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  color: var(--text-secondary);
  background: var(--bg-primary);
  padding: 2px 6px;
  border-radius: 4px;
  white-space: nowrap;
  max-width: 100px;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ─── Small Button Variant ─── */
.btn-sm {
  padding: 3px 8px;
  font-size: 11px;
}

/* ─── Cascading Category Picker ─── */
.cat-picker {
  min-width: 240px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow), 0 8px 24px rgba(0, 0, 0, 0.4);
  overflow: hidden;
}

/* Invisible anchor placed where the picker is requested */
.cat-picker-anchor {
  display: inline-block;
  width: 0;
  height: 0;
  vertical-align: top;
}

.cat-picker-list {
  max-height: 360px;
  overflow-y: auto;
}

.cat-picker-list::-webkit-scrollbar {
  width: 6px;
}

.cat-picker-list::-webkit-scrollbar-track {
  background: transparent;
}

.cat-picker-list::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 3px;
}

.cat-picker-search {
  position: sticky;
  top: 0;
  z-index: 1;
  width: 100%;
  padding: 8px 12px;
  border: none;
  border-bottom: 1px solid var(--border);
  background: var(--bg-card);
  color: var(--text);
  font-size: 12px;
  outline: none;
  box-sizing: border-box;
}
.cat-picker-search::placeholder {
  color: var(--text-muted);
}
.cat-picker-search:focus {
  border-bottom-color: var(--accent);
}

.cat-picker-header {
  position: sticky;
  top: 0;
  padding: 10px 14px;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  background: var(--bg-card);
  border-bottom: 1px solid var(--border);
}

.cat-picker-header.clickable {
  cursor: pointer;
  color: var(--accent);
  text-transform: none;
  letter-spacing: 0;
  font-size: 13px;
  transition: background 0.15s;
}

.cat-picker-header.clickable:hover {
  background: var(--bg-hover);
}

.cat-picker-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 9px 14px;
  font-size: 13px;
  color: var(--text-primary);
  cursor: pointer;
  transition: background 0.1s;
}

.cat-picker-item:hover {
  background: var(--bg-hover);
}

.cat-picker-item.parent {
  font-weight: 500;
}

.cat-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  flex-shrink: 0;
}

.cat-picker-label {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.cat-picker-arrow {
  color: var(--text-muted);
  flex-shrink: 0;
}

.cat-recurring-badge {
  font-size: 10px;
  font-weight: 600;
  color: var(--accent);
  background: rgba(96, 165, 250, 0.1);
  padding: 1px 6px;
  border-radius: 4px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  flex-shrink: 0;
}

.cat-recurring-toggle {
  display: flex;
  align-items: center;
  gap: 4px;
  cursor: pointer;
  flex-shrink: 0;
  margin-left: auto;
}

.cat-recurring-toggle input {
  width: 13px;
  height: 13px;
  cursor: pointer;
}

.cat-recurring-label {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  color: var(--text-muted);
  opacity: 0.5;
  transition: all 0.15s;
}

.cat-recurring-label.active {
  color: var(--accent);
  opacity: 1;
}

/* ─── Quick-Add Form (inside category picker) ─── */
.cat-picker-add {
  color: var(--accent) !important;
  border-top: 1px solid var(--border);
  font-size: 13px;
}

.cat-picker-quick-add {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  border-top: 1px solid var(--border);
}

.cat-picker-quick-add input {
  flex: 1;
  background: var(--bg-primary);
  color: var(--text-primary);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 5px 8px;
  font-size: 12px;
  outline: none;
}

.cat-picker-quick-add input:focus {
  border-color: var(--accent);
}

/* ─── Category Tree (Categories page) ─── */
.cat-tree {
  display: flex;
  flex-direction: column;
}

.cat-tree-parent {
  border-bottom: 1px solid var(--border);
}

.cat-tree-parent:last-child {
  border-bottom: none;
}

.cat-tree-parent-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 14px;
  cursor: pointer;
  transition: background 0.1s;
}

.cat-tree-parent-row:hover {
  background: var(--bg-hover);
}

.cat-tree-expand {
  color: var(--text-muted);
  flex-shrink: 0;
  display: flex;
  align-items: center;
}

.cat-tree-name {
  font-size: 14px;
  font-weight: 500;
}

.cat-tree-key {
  font-size: 12px;
  color: var(--text-muted);
  font-family: monospace;
  background: var(--bg-primary);
  padding: 1px 6px;
  border-radius: 3px;
}

.cat-tree-count {
  font-size: 11px;
  color: var(--text-muted);
  margin-left: auto;
}

.cat-tree-children {
  padding-left: 20px;
  background: var(--bg-secondary);
  border-top: 1px solid var(--border);
}

.cat-tree-child-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 9px 14px;
  font-size: 13px;
  border-bottom: 1px solid var(--border);
}

.cat-tree-child-row:last-child {
  border-bottom: none;
}

.cat-tree-indent {
  width: 16px;
  flex-shrink: 0;
}

.cat-tree-add-child {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  font-size: 12px;
  color: var(--accent);
  cursor: pointer;
  transition: background 0.1s;
}

.cat-tree-add-child:hover {
  background: var(--bg-hover);
}

/* ─── Move-to-Parent Picker ─── */
.move-picker {
  min-width: 220px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow), 0 8px 24px rgba(0, 0, 0, 0.4);
  overflow: hidden;
}
.move-picker-header {
  padding: 8px 12px;
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.3px;
  border-bottom: 1px solid var(--border);
}
.move-picker-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  font-size: 13px;
  color: var(--text);
  cursor: pointer;
  transition: background 0.1s;
}
.move-picker-item:hover {
  background: var(--bg-hover);
}

/* ─── Merge Target Picker ─── */
.merge-picker {
  min-width: 260px;
  max-height: 360px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow), 0 8px 24px rgba(0, 0, 0, 0.4);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}
.merge-picker-header {
  padding: 8px 12px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--text-muted);
  letter-spacing: 0.3px;
  border-bottom: 1px solid var(--border);
}
.merge-picker-search {
  margin: 8px;
  padding: 6px 10px;
  font-size: 12px;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: var(--bg-primary);
  color: var(--text-primary);
  outline: none;
}
.merge-picker-search:focus {
  border-color: var(--accent);
}
.merge-picker-list {
  overflow-y: auto;
  max-height: 280px;
}
.merge-picker-parent {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.2px;
}
.merge-picker-item {
  padding: 7px 12px 7px 28px;
  font-size: 13px;
  color: var(--text-primary);
  cursor: pointer;
  transition: background 0.1s;
}
.merge-picker-item:hover {
  background: var(--bg-hover);
}

/* ─── Category Rename (inline) ─── */
.cat-rename-form {
  display: flex;
  align-items: center;
  gap: 4px;
  flex: 1;
}
.cat-rename-input {
  flex: 1;
  padding: 2px 8px;
  font-size: 13px;
  border: 1px solid var(--accent);
  border-radius: var(--radius);
  background: var(--bg);
  color: var(--text);
  outline: none;
}

/* ─── Category Form (inline) ─── */
.cat-tree-form-wrap {
  padding: 14px;
  background: var(--bg-secondary);
  border-top: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
}

.cat-tree-form-wrap.sub {
  padding: 10px 14px;
}

.cat-form {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.cat-form-row {
  display: flex;
  align-items: flex-end;
  gap: 12px;
  flex-wrap: wrap;
}

.cat-form-field {
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1;
  min-width: 140px;
}

.cat-form-field label {
  font-size: 11px;
  color: var(--text-muted);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.cat-form-field input[type="text"] {
  background: var(--bg-primary);
  color: var(--text-primary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 6px 10px;
  font-size: 13px;
  outline: none;
}

.cat-form-field input[type="text"]:focus {
  border-color: var(--accent);
}

.cat-form-color {
  flex: 0;
  min-width: auto;
}

.cat-form-color input[type="color"] {
  width: 36px;
  height: 32px;
  padding: 2px;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: var(--bg-primary);
  cursor: pointer;
}

.cat-form-check {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: var(--text-secondary);
  cursor: pointer;
}

.cat-form-check input[type="checkbox"] {
  accent-color: var(--accent);
}

.cat-form-actions {
  display: flex;
  gap: 6px;
  margin-left: auto;
}

/* ─── Icon Buttons ─── */
.btn-icon {
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  transition: all 0.15s;
}

.btn-icon:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.btn-icon.danger:hover {
  color: var(--red);
  background: var(--red-bg);
}

/* ─── Error Banner ─── */
.error-banner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: var(--red-bg);
  color: var(--red);
  border: 1px solid rgba(248, 113, 113, 0.3);
  border-radius: var(--radius);
  padding: 10px 14px;
  font-size: 13px;
  margin-bottom: 16px;
}

/* Chart Container */
.chart-container {
  padding: 16px 0;
}

/* Account Cards */
.acct-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 16px;
}

.acct-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  transition: border-color 0.15s;
}

.acct-card:hover {
  border-color: rgba(96, 165, 250, 0.3);
}

.acct-card-header {
  display: flex;
  align-items: center;
  gap: 10px;
}

.acct-card-icon {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  background: rgba(96, 165, 250, 0.1);
  color: var(--accent);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.acct-card-info {
  flex: 1;
  min-width: 0;
}

.acct-card-name {
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.acct-card-type {
  font-size: 12px;
  color: var(--text-muted);
  text-transform: capitalize;
}

.acct-status-badge {
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 11px;
  font-weight: 500;
  padding: 3px 8px;
  border-radius: 12px;
  border: 1px solid;
  text-transform: capitalize;
  flex-shrink: 0;
}

.acct-card-balances {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 10px;
  background: var(--bg-primary);
  border-radius: var(--radius);
}

.acct-balance-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 13px;
}

.acct-balance-label {
  display: flex;
  align-items: center;
  gap: 5px;
  color: var(--text-muted);
}

.acct-balance-value {
  font-weight: 600;
  color: var(--text-primary);
}

.acct-balance-value.muted {
  font-weight: 400;
  color: var(--text-muted);
}

.acct-balance-row.last-sync {
  border-top: 1px solid var(--border);
  padding-top: 6px;
  margin-top: 2px;
}

.acct-error {
  display: flex;
  align-items: flex-start;
  gap: 6px;
  font-size: 12px;
  color: var(--red);
  background: var(--red-bg);
  padding: 8px 10px;
  border-radius: var(--radius);
  line-height: 1.4;
}

.acct-card-actions {
  display: flex;
  gap: 6px;
}

.acct-btn {
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 12px;
  padding: 6px 10px;
}

.acct-btn-unlink:hover,
.acct-btn-delete:hover {
  color: var(--red) !important;
  border-color: rgba(248, 113, 113, 0.3) !important;
  background: var(--red-bg) !important;
}

.acct-sync-result {
  font-size: 12px;
  padding: 6px 10px;
  border-radius: var(--radius);
  display: flex;
  align-items: center;
}

.acct-sync-result span {
  display: flex;
  align-items: center;
  gap: 5px;
}

.acct-sync-result.success {
  background: var(--green-bg);
  color: var(--green);
}

.acct-sync-result.error {
  background: var(--red-bg);
  color: var(--red);
}

/* Welcome / Getting Started */
.acct-welcome {
  margin-bottom: 16px;
}

.acct-welcome-options {
  display: flex;
  gap: 0;
  align-items: stretch;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.acct-welcome-option {
  flex: 1;
  padding: 32px 28px;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  gap: 12px;
}

.acct-welcome-icon {
  width: 56px;
  height: 56px;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 4px;
}

.acct-welcome-option h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.acct-welcome-option p {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.5;
  max-width: 280px;
}

.acct-welcome-action {
  margin-top: 4px;
}

.acct-welcome-note {
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 4px;
}

.acct-welcome-divider {
  display: flex;
  align-items: center;
  padding: 0 4px;
  position: relative;
}

.acct-welcome-divider::before {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  left: 50%;
  width: 1px;
  background: var(--border);
}

.acct-welcome-divider span {
  position: relative;
  z-index: 1;
  background: var(--bg-secondary);
  padding: 8px 0;
  font-size: 12px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* Disconnected account rows */
.acct-disconnect-list {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.acct-disconnect-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 0;
  border-bottom: 1px solid var(--border);
}

.acct-disconnect-row:last-child {
  border-bottom: none;
}

.acct-disconnect-row-left {
  display: flex;
  align-items: center;
  gap: 10px;
}

/* Add Account Form */
.acct-add-form {
  padding: 16px;
  margin-bottom: 16px;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
}

.acct-add-form-row {
  display: flex;
  gap: 12px;
}

.acct-add-field {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.acct-add-field label {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-muted);
}

.acct-add-field input,
.acct-add-field select {
  padding: 8px 10px;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: var(--bg-secondary);
  color: var(--text-primary);
  font-size: 13px;
  outline: none;
}

.acct-add-field input:focus,
.acct-add-field select:focus {
  border-color: var(--accent);
}

.acct-add-form-actions {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}

/* Empty state for accounts */
.acct-empty-state {
  text-align: center;
  padding: 40px 20px;
}

/* Spin animation for sync buttons */
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.spin {
  animation: spin 1s linear infinite;
}

/* Responsive */
@media (max-width: 768px) {
  .sidebar {
    display: none;
  }
  .main-content {
    margin-left: 0;
    padding: 16px;
  }
  .stats-row {
    grid-template-columns: 1fr 1fr;
  }
  .acct-grid {
    grid-template-columns: 1fr;
  }
  .acct-welcome-options {
    flex-direction: column;
  }
  .acct-welcome-divider {
    padding: 4px 0;
  }
  .acct-welcome-divider::before {
    top: 50%;
    bottom: auto;
    left: 0;
    right: 0;
    width: auto;
    height: 1px;
  }
  .acct-welcome-divider span {
    padding: 0 12px;
  }
}

/* Sync History */
.sync-history-table th,
.sync-history-table td {
  font-size: 12px;
  padding: 8px 10px;
}

.sync-trigger-badge {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.sync-trigger-badge.scheduled { background: rgba(96, 165, 250, 0.15); color: #60a5fa; }
.sync-trigger-badge.manual { background: rgba(251, 191, 36, 0.15); color: #fbbf24; }
.sync-trigger-badge.initial { background: rgba(52, 211, 153, 0.15); color: #34d399; }
.sync-trigger-badge.retry { background: rgba(248, 113, 113, 0.15); color: #f87171; }

.sync-date-separator td {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: var(--text-muted);
  background: var(--bg-secondary);
  padding: 6px 10px;
  border-bottom: 1px solid var(--border);
}

/* ─── Data Page ─── */

.data-year-select {
  background: var(--bg-primary);
  color: var(--text-primary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 8px 16px;
  font-size: 15px;
  font-weight: 500;
  cursor: pointer;
}
.data-year-select:focus {
  outline: none;
  border-color: var(--accent);
}

.data-account-select {
  background: var(--bg-primary);
  color: var(--text-primary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 8px 12px;
  font-size: 14px;
  min-width: 180px;
  cursor: pointer;
}
.data-account-select:focus {
  outline: none;
  border-color: var(--accent);
}

.data-search-box {
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 6px 12px;
}
.data-search-box input {
  background: transparent;
  border: none;
  color: var(--text-primary);
  font-size: 14px;
  outline: none;
  width: 180px;
}
.data-search-box input::placeholder {
  color: var(--text-muted);
}
.data-search-box svg {
  color: var(--text-muted);
  flex-shrink: 0;
}

.data-date-badge {
  display: flex;
  align-items: center;
  gap: 6px;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 6px 12px;
  font-size: 13px;
  color: var(--text-secondary);
  white-space: nowrap;
}
.data-date-badge svg {
  color: var(--accent);
  flex-shrink: 0;
}
.data-date-count {
  color: var(--text-muted);
  margin-left: 6px;
  padding-left: 8px;
  border-left: 1px solid var(--border);
}

.data-table-wrapper {
  overflow-x: auto;
}

.data-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}
.data-table thead {
  position: sticky;
  top: 0;
  z-index: 1;
}
.data-table th {
  background: var(--bg-primary);
  color: var(--text-muted);
  font-weight: 600;
  text-transform: uppercase;
  font-size: 11px;
  letter-spacing: 0.5px;
  padding: 10px 12px;
  text-align: left;
  border-bottom: 1px solid var(--border);
  white-space: nowrap;
  user-select: none;
}
.data-th-date { width: 120px; }
.data-th-desc { min-width: 200px; }
.data-th-amount { width: 110px; text-align: right; }
.data-th-category { width: 150px; }
.data-th-status { width: 100px; }
.data-th-source { width: 80px; }

.data-row {
  border-bottom: 1px solid rgba(45, 50, 68, 0.5);
  transition: background 0.15s;
}
.data-row:hover {
  background: var(--bg-hover);
}
.data-row.selected {
  background: rgba(99, 102, 241, 0.08);
}
.data-row.selected:hover {
  background: rgba(99, 102, 241, 0.12);
}

.data-row td {
  padding: 10px 12px;
  vertical-align: middle;
}

.data-cell-date {
  color: var(--text-secondary);
  white-space: nowrap;
  font-variant-numeric: tabular-nums;
}

.data-cell-desc {
  max-width: 300px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.data-cell-amount {
  text-align: right;
  font-weight: 600;
  font-variant-numeric: tabular-nums;
  white-space: nowrap;
}
.data-cell-amount.expense { color: var(--red); }
.data-cell-amount.income { color: var(--green); }

.data-cat-badge {
  display: inline-block;
  background: rgba(96, 165, 250, 0.12);
  color: var(--accent);
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 12px;
  white-space: nowrap;
}
.data-cat-badge.clickable {
  cursor: pointer;
  transition: background 0.15s, box-shadow 0.15s;
}
.data-cat-badge.clickable:hover {
  background: rgba(96, 165, 250, 0.25);
  box-shadow: 0 0 0 1px var(--accent);
}
.data-cat-badge.predicted {
  background: rgba(251, 191, 36, 0.1);
  color: var(--yellow);
}
.data-cat-badge.predicted.clickable:hover {
  background: rgba(251, 191, 36, 0.25);
  box-shadow: 0 0 0 1px var(--yellow);
}
.data-cat-badge.none {
  color: var(--text-muted);
  background: transparent;
}
.data-cat-badge.none.clickable:hover {
  background: rgba(255, 255, 255, 0.05);
  box-shadow: 0 0 0 1px var(--border);
}

/* Category picker anchor is now portalled — no overflow clipping issues */

.data-cell-status {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--text-secondary);
}

.data-status-dot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
  flex-shrink: 0;
}
.data-status-dot.confirmed,
.data-status-dot.auto_confirmed {
  background: var(--green);
}
.data-status-dot.pending_review {
  background: var(--yellow);
}

.data-cell-source {
  font-size: 12px;
  color: var(--text-muted);
}

.data-pagination {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-top: 1px solid var(--border);
}
.data-page-info {
  font-size: 13px;
  color: var(--text-muted);
}
.data-page-size {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: var(--text-muted);
}

/* ─── Review Queue Tabs ─── */
.review-tabs {
  display: flex;
  gap: 0;
  border-bottom: none;
  margin-top: 8px;
}

.review-tab {
  padding: 10px 20px;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-muted);
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-bottom: none;
  border-radius: var(--radius) var(--radius) 0 0;
  cursor: pointer;
  transition: all 0.15s;
  margin-right: -1px;
}

.review-tab:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.review-tab.active {
  color: var(--accent);
  background: var(--bg-card);
  border-color: var(--border);
  border-bottom-color: var(--bg-card);
  position: relative;
  z-index: 1;
}

.review-tab-sort {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-left: auto;
  padding: 6px 12px;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-muted);
  background: none;
  border: 1px solid transparent;
  border-bottom: none;
  border-radius: var(--radius) var(--radius) 0 0;
  cursor: pointer;
  transition: all 0.15s;
}

.review-tab-sort:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

/* ─── Batch Result Banner ─── */
.batch-result-banner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: rgba(96, 165, 250, 0.08);
  color: var(--accent);
  border: 1px solid rgba(96, 165, 250, 0.2);
  border-radius: var(--radius);
  padding: 10px 14px;
  font-size: 13px;
  margin-bottom: 16px;
  line-height: 1.5;
}

/* ─── Staged Group (in review item) ─── */
.staged-group {
  display: flex;
  align-items: center;
  gap: 6px;
  min-width: 0;
}

.staged-label {
  display: inline-block;
  font-size: 11px;
  color: var(--green);
  background: var(--green-bg);
  padding: 2px 6px;
  border-radius: 4px;
  white-space: nowrap;
  max-width: 100px;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ─── Icon-Only Button ─── */
.btn-icon-only {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4px 6px !important;
  min-width: 28px;
  flex-shrink: 0;
}

/* ─── Custom Category Filter Dropdown ─── */
.filter-dropdown {
  position: relative;
}
.filter-dropdown-trigger {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  font-size: 12px;
  color: var(--text-muted);
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  cursor: pointer;
  white-space: nowrap;
  transition: all 0.15s;
}
.filter-dropdown-trigger:hover {
  border-color: var(--text-muted);
  color: var(--text);
}
.filter-dropdown-trigger.active {
  color: var(--accent);
  border-color: var(--accent);
  background: rgba(99, 102, 241, 0.08);
}
.filter-clear {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: var(--text-muted);
  color: var(--bg-card);
  cursor: pointer;
  flex-shrink: 0;
}
.filter-clear:hover {
  background: var(--red);
}
.filter-dropdown-panel {
  position: absolute;
  top: calc(100% + 4px);
  right: 0;
  z-index: 150;
  min-width: 220px;
  max-width: 280px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow), 0 8px 24px rgba(0, 0, 0, 0.4);
  overflow: hidden;
}
.filter-dropdown-search {
  width: 100%;
  padding: 8px 10px;
  border: none;
  border-bottom: 1px solid var(--border);
  background: var(--bg-card);
  color: var(--text);
  font-size: 12px;
  outline: none;
  box-sizing: border-box;
}
.filter-dropdown-search::placeholder { color: var(--text-muted); }
.filter-dropdown-search:focus { border-bottom-color: var(--accent); }
.filter-dropdown-list {
  max-height: 280px;
  overflow-y: auto;
}
.filter-dropdown-list::-webkit-scrollbar { width: 5px; }
.filter-dropdown-list::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
.filter-dropdown-item {
  padding: 6px 12px;
  font-size: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  transition: background 0.1s;
}
.filter-dropdown-item:hover {
  background: var(--bg-hover);
  color: var(--text);
}
.filter-dropdown-item.selected {
  color: var(--accent);
  background: rgba(99, 102, 241, 0.08);
}
.filter-parent {
  font-weight: 600;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  color: var(--text-muted);
  padding-top: 10px;
  gap: 4px;
}
.filter-parent:hover { color: var(--text); }
.filter-parent.selected { color: var(--accent); }
.filter-expand-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  width: 18px;
  height: 18px;
  border-radius: 3px;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.1s;
}
.filter-expand-toggle:hover {
  background: var(--bg-hover);
  color: var(--text);
}
.filter-parent-name {
  flex: 1;
  min-width: 0;
}
.filter-child-name {
  flex: 1;
  min-width: 0;
}
.filter-child {
  padding-left: 34px;
  font-weight: 400;
  text-transform: none;
  letter-spacing: 0;
}
.filter-count {
  font-size: 10px;
  color: var(--text-muted);
  background: var(--bg-primary);
  padding: 1px 5px;
  border-radius: 8px;
  min-width: 18px;
  text-align: center;
  flex-shrink: 0;
}

/* ─── Multi-Select Checkboxes ─── */
.review-checkbox {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  cursor: pointer;
  color: var(--text-muted);
  transition: color 0.1s;
  width: 18px;
}
.review-checkbox:hover {
  color: var(--accent);
}
.review-item.selected .review-checkbox {
  color: var(--accent);
}
.review-item.selected {
  border-color: var(--accent);
  background: rgba(99, 102, 241, 0.04);
}
.review-select-all {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 12px;
  cursor: pointer;
  user-select: none;
  border-radius: var(--radius);
  transition: background 0.1s;
}
.review-select-all:hover {
  background: var(--bg-hover);
}
.review-select-all .review-checkbox {
  color: var(--text-muted);
}
.review-select-all:hover .review-checkbox {
  color: var(--accent);
}

/* ─── Bulk Action Bar ─── */
.bulk-action-bar {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 16px;
  margin-bottom: 8px;
  background: rgba(99, 102, 241, 0.06);
  border: 1px solid rgba(99, 102, 241, 0.2);
  border-radius: var(--radius);
}
.bulk-count {
  font-size: 12px;
  font-weight: 600;
  color: var(--accent);
  white-space: nowrap;
}
.bulk-actions {
  display: flex;
  align-items: center;
  gap: 6px;
  position: relative;
}
.bulk-picker-anchor {
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 200;
}
/* Bulk picker now uses portalled CategoryPicker — no positioning override needed */

/* ─── Status dot for pending_save ─── */
.data-status-dot.pending_save {
  background: var(--accent);
}

/* ─── Batch Progress Bar ─── */
.batch-progress-wrapper {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 280px;
}

.batch-progress-info {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: var(--accent);
  white-space: nowrap;
}

.batch-progress-bar {
  flex: 1;
  height: 8px;
  min-width: 100px;
  background: var(--bg-primary);
  border-radius: 4px;
  overflow: hidden;
  border: 1px solid var(--border);
}

.batch-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--accent), #818cf8);
  border-radius: 4px;
  transition: width 0.3s ease;
}

.batch-progress-pct {
  font-size: 12px;
  font-weight: 600;
  color: var(--accent);
  min-width: 32px;
  text-align: right;
}

/* ─── Confidence Badge ─── */
.confidence-badge {
  font-size: 10px;
  font-weight: 600;
  padding: 2px 5px;
  border-radius: 3px;
  white-space: nowrap;
  flex-shrink: 0;
}

.confidence-badge.high {
  color: var(--green);
  background: var(--green-bg);
}

.confidence-badge.med {
  color: var(--yellow);
  background: var(--yellow-bg);
}

.confidence-badge.low {
  color: var(--red);
  background: var(--red-bg);
}

/* ═══════════════════════════════════════════════════
   Cash Flow Page — Tufte-inspired styles
   ═══════════════════════════════════════════════════ */

/* ─── Summary line in header ─── */
.cf-summary {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 14px;
  color: var(--text-secondary);
  margin-top: 2px;
}

.cf-sep {
  color: var(--text-muted);
  font-size: 12px;
}

.cf-positive { color: var(--green); }
.cf-negative { color: var(--red); }

/* ─── Chart card ─── */
.cf-chart-card {
  padding: 12px 16px 8px;
  margin-bottom: 16px;
}

.cf-chart-label {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 4px;
}

.cf-chart {
  /* Let Recharts fill this */
}

/* ─── Section headers (inside cards with padding:0) ─── */
.cf-section-header {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 12px 16px 6px;
}

/* ─── Tufte Table ─── */
.cf-table {
  width: 100%;
  border-collapse: collapse;
  font-variant-numeric: tabular-nums;
}

.cf-table thead th {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.4px;
  padding: 6px 16px;
  border-bottom: 1px solid var(--border);
  /* No vertical borders — Tufte */
}

.cf-table tbody tr {
  border-bottom: 1px solid rgba(45, 50, 68, 0.3);
  transition: background 0.1s;
}

.cf-table tbody tr:last-child {
  border-bottom: none;
}

.cf-table tbody tr:hover {
  background: var(--bg-hover);
}

/* Column widths */
.cf-th-name { text-align: left; }
.cf-th-num { text-align: right; width: 110px; }
.cf-th-trend { text-align: right; width: 100px; }

/* Cell styles */
.cf-td-name {
  padding: 9px 16px;
  font-size: 13px;
  color: var(--text-primary);
  display: flex;
  align-items: center;
  gap: 6px;
}

.cf-td-num {
  padding: 9px 16px;
  font-size: 13px;
  text-align: right;
  white-space: nowrap;
}

.cf-td-trend {
  padding: 9px 16px;
  text-align: right;
}

.cf-td-week {
  font-size: 12px;
  color: var(--text-secondary);
}

/* ─── Expandable rows ─── */
.cf-expandable {
  cursor: pointer;
}

.cf-expandable:hover {
  background: var(--bg-hover);
}

.cf-chevron {
  color: var(--text-muted);
  flex-shrink: 0;
}

.cf-chevron-spacer {
  display: inline-block;
  width: 14px;
  flex-shrink: 0;
}

.cf-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

/* ─── Child rows (expanded subcategories) ─── */
.cf-child-row {
  background: var(--bg-primary);
}

.cf-child-row .cf-td-name {
  font-size: 12px;
  color: var(--text-secondary);
}

.cf-child-row .cf-td-num {
  font-size: 12px;
  color: var(--text-secondary);
}

.cf-indent {
  padding-left: 52px !important;
}

/* ─── Total row ─── */
.cf-total-row {
  border-top: 2px solid var(--border);
  background: var(--bg-secondary);
}

.cf-total-row td {
  padding-top: 10px !important;
  padding-bottom: 10px !important;
}

/* ─── Weekly row tinting ─── */
.cf-week-pos {
  background: rgba(52, 211, 153, 0.03);
}

.cf-week-neg {
  background: rgba(248, 113, 113, 0.04);
}

/* ─── Sparkline ─── */
.cf-sparkline {
  vertical-align: middle;
  display: inline-block;
}

/* ─── Cash Flow Transaction Drill-Down ─── */
.cf-txn-row {
  background: var(--bg-primary);
}

.cf-txn-row td {
  padding: 0 !important;
  border: none !important;
}

.cf-txn-cell {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 6px 16px 6px 52px;
  border-bottom: 1px solid var(--border);
  font-size: 13px;
  min-width: 0;
}

.cf-txn-row:last-child .cf-txn-cell {
  border-bottom: none;
}

.cf-txn-date {
  color: var(--text-muted);
  font-size: 11px;
  white-space: nowrap;
  min-width: 56px;
  font-variant-numeric: tabular-nums;
}

.cf-txn-desc {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--text-primary);
}

.cf-txn-amount {
  font-weight: 600;
  white-space: nowrap;
  font-variant-numeric: tabular-nums;
  min-width: 70px;
  text-align: right;
}

.cf-txn-amount.expense {
  color: var(--red);
}

.cf-txn-amount.income {
  color: var(--green);
}

.cf-txn-cat-area {
  position: relative;
  flex-shrink: 0;
}

.cf-cat-badge {
  display: inline-block;
  padding: 2px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 500;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  color: var(--text-secondary);
  cursor: pointer;
  white-space: nowrap;
  transition: border-color 0.15s, background 0.15s;
}

.cf-cat-badge:hover {
  border-color: var(--accent);
  background: var(--bg-hover);
}

.cf-txn-loading {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 52px;
  color: var(--text-muted);
  font-size: 13px;
}

/* ─── Period Drill-Down: Side-by-Side Income / Expenses ─── */
.cf-period-loading {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px 20px;
  color: var(--text-muted);
  font-size: 13px;
}

.cf-period-split {
  display: flex;
  gap: 0;
  border-top: 1px solid var(--border);
  overflow: hidden;
}

.cf-period-col {
  flex: 1 1 50%;
  min-width: 0;
  max-width: 50%;
  background: var(--bg-primary);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.cf-period-col + .cf-period-col {
  border-left: 2px solid var(--border);
}

.cf-period-col-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 12px;
  font-size: 13px;
  font-weight: 600;
  border-bottom: 1px solid var(--border);
  background: var(--bg-secondary);
  white-space: nowrap;
}

.cf-period-col-header.cf-positive {
  color: var(--green);
}

.cf-period-col-header.cf-negative {
  color: var(--red);
}

.cf-period-col-count {
  font-size: 11px;
  font-weight: 400;
  color: var(--text-muted);
}

.cf-period-col-scroll {
  max-height: 400px;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: thin;
}

.cf-period-txn {
  display: grid;
  grid-template-columns: 48px minmax(0, 1fr) auto;
  grid-template-rows: auto auto;
  gap: 0 6px;
  padding: 7px 10px;
  font-size: 12px;
  border-bottom: 1px solid var(--border);
  min-width: 0;
  overflow: hidden;
}

.cf-period-txn:last-child {
  border-bottom: none;
}

.cf-period-txn:hover {
  background: var(--bg-hover);
}

/* Override shared styles inside period txn to use grid layout */
.cf-period-txn > .cf-txn-date {
  grid-column: 1;
  grid-row: 1;
  font-size: 11px;
}

.cf-period-txn > .cf-txn-desc {
  grid-column: 2;
  grid-row: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: 12px;
}

.cf-period-txn > .cf-txn-amount {
  grid-column: 3;
  grid-row: 1;
  font-size: 12px;
  min-width: unset;
  text-align: right;
}

.cf-period-txn > .cf-txn-cat-area {
  grid-column: 2 / -1;
  grid-row: 2;
  margin-top: 2px;
}

.cf-period-empty {
  padding: 20px 12px;
  color: var(--text-muted);
  font-size: 12px;
  text-align: center;
  font-style: italic;
}

/* ═══════════════════════════════════════════════════
   Spending — Expandable Category Drill-Down
   ═══════════════════════════════════════════════════ */

.sp-expandable {
  cursor: pointer;
  transition: background 0.15s;
}

.sp-expandable:hover {
  background: var(--bg-hover);
}

.sp-chevron {
  color: var(--text-muted);
  flex-shrink: 0;
}

/* Parent category row */
.sp-parent-row td {
  font-weight: 600;
}

/* Subcategory row (indented child of parent) */
.sp-child-row {
  background: var(--bg-secondary);
}

.sp-child-row td {
  font-size: 13px;
  color: var(--text-secondary);
}

.sp-subcat-name {
  display: flex;
  align-items: center;
  gap: 6px;
  padding-left: 28px;
}

/* Transaction sub-row (expanded) */
.sp-txn-row {
  background: var(--bg-primary);
}

.sp-txn-row td {
  padding: 0 !important;
  border: none !important;
}

.sp-txn-cell {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 6px 12px 6px 42px;
  border-bottom: 1px solid var(--border);
  font-size: 13px;
  min-width: 0;
}

.sp-txn-row:last-child .sp-txn-cell {
  border-bottom: none;
}

.sp-txn-date {
  color: var(--text-muted);
  font-size: 11px;
  white-space: nowrap;
  min-width: 56px;
  font-variant-numeric: tabular-nums;
}

.sp-txn-desc {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--text-primary);
}

.sp-txn-amount {
  font-weight: 600;
  white-space: nowrap;
  font-variant-numeric: tabular-nums;
  min-width: 70px;
  text-align: right;
}

.sp-txn-amount.expense {
  color: var(--red);
}

.sp-txn-amount.income {
  color: var(--green);
}

.sp-txn-cat-area {
  position: relative;
  flex-shrink: 0;
}

.sp-cat-badge {
  display: inline-block;
  padding: 2px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 500;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  color: var(--text-secondary);
  cursor: pointer;
  white-space: nowrap;
  transition: border-color 0.15s, background 0.15s;
}

.sp-cat-badge:hover {
  border-color: var(--accent);
  background: var(--bg-hover);
}

.sp-loading {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 42px;
  color: var(--text-muted);
  font-size: 13px;
}


/* ═══════════════════════════════════════════
   Recurring Monitor
   ═══════════════════════════════════════════ */

/* ── Top Bar ── */

.recurring-top-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.recurring-top-bar h2 {
  margin: 0;
}

.recurring-top-controls {
  display: flex;
  align-items: center;
  gap: 10px;
}

/* ── Filter Dropdown ── */

.recurring-filter-dropdown {
  position: relative;
}

.recurring-filter-trigger {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  font-size: 12px;
  color: var(--text-secondary);
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  cursor: pointer;
  white-space: nowrap;
  transition: all 0.15s;
}

.recurring-filter-trigger:hover,
.recurring-filter-trigger.active {
  color: var(--accent);
  border-color: var(--accent);
  background: rgba(99, 102, 241, 0.08);
}

.recurring-filter-panel {
  position: absolute;
  top: calc(100% + 4px);
  right: 0;
  z-index: 150;
  width: 260px;
  max-height: 400px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow), 0 8px 24px rgba(0, 0, 0, 0.4);
  display: flex;
  flex-direction: column;
}

.recurring-filter-panel-header {
  display: flex;
  justify-content: flex-end;
  gap: 6px;
  padding: 8px 12px;
  border-bottom: 1px solid var(--border);
}

.recurring-filter-panel-list {
  overflow-y: auto;
  padding: 6px 0;
}

.recurring-filter-parent-row {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 5px 12px;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-primary);
  cursor: pointer;
  user-select: none;
}

.recurring-filter-parent-row:hover {
  background: var(--bg-hover);
}

.recurring-filter-child-row {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 3px 12px 3px 34px;
  font-size: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  user-select: none;
}

.recurring-filter-child-row:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.recurring-link-btn {
  background: none;
  border: none;
  color: var(--accent);
  cursor: pointer;
  font-size: 11px;
  padding: 2px 6px;
  border-radius: 4px;
  transition: background 0.15s;
}

.recurring-link-btn:hover {
  background: rgba(96, 165, 250, 0.1);
}

.recurring-checkbox {
  width: 14px;
  height: 14px;
  cursor: pointer;
  accent-color: var(--accent);
  flex-shrink: 0;
}

.recurring-color-dot {
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

/* ── Grid Container — fill remaining viewport ── */

.recurring-grid-container {
  overflow: auto;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  max-height: calc(100vh - 180px);
}

/* ── Table — compact to fit viewport ── */

.recurring-table {
  width: 100%;
  border-collapse: collapse;
  font-variant-numeric: tabular-nums;
  table-layout: fixed;
}

.recurring-table thead th {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.3px;
  padding: 8px 6px;
  border-bottom: 1px solid var(--border);
  white-space: nowrap;
  position: sticky;
  top: 0;
  background: var(--bg-card);
  z-index: 2;
}

.recurring-name-col {
  text-align: left;
  width: 140px;
  padding: 6px 10px;
  position: sticky;
  left: 0;
  background: var(--bg-card);
  z-index: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

thead .recurring-name-col {
  z-index: 3;
}

.recurring-child-name {
  padding-left: 20px;
  font-weight: 400;
  color: var(--text-primary);
  font-size: 12px;
}

.recurring-cell {
  text-align: right;
  padding: 6px 6px;
  font-size: 11px;
  white-space: nowrap;
  color: var(--text-primary);
}

.recurring-inactive-header {
  color: var(--text-muted);
  opacity: 0.5;
}

.recurring-table tbody tr {
  border-bottom: 1px solid rgba(45, 50, 68, 0.3);
  transition: background 0.1s;
}

.recurring-table tbody tr:hover {
  background: var(--bg-hover);
}

.recurring-table tbody tr:hover .recurring-name-col {
  background: var(--bg-hover);
}

/* ── Group Header ── */

.recurring-group-header td {
  font-size: 10px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 10px 10px 3px;
  background: var(--bg-card);
  border-bottom: none;
}

.recurring-group-header .recurring-color-dot {
  margin-right: 6px;
  vertical-align: middle;
}

.recurring-group-header:hover td {
  background: var(--bg-card);
}

/* ── Indicators ── */

.recurring-indicator {
  display: inline-block;
  margin-left: 3px;
  font-weight: 700;
  font-size: 10px;
}

.recurring-indicator.up {
  color: var(--red);
}

.recurring-indicator.down {
  color: var(--green);
}

/* ── Missing / Zero ── */

.recurring-missing {
  color: var(--text-muted);
  font-style: italic;
  opacity: 0.5;
}

.recurring-zero {
  color: var(--text-muted);
  opacity: 0.6;
}

/* ── Row Total ── */

.recurring-row-total {
  font-weight: 500;
  border-left: 1px solid var(--border);
}

/* ── Footer Total Rows ── */

.recurring-total-row td {
  font-weight: 600;
  padding: 6px 6px;
  color: var(--text-primary);
}

.recurring-outflow-row td {
  border-top: 2px solid var(--border);
  background: rgba(248, 113, 113, 0.04);
}

.recurring-outflow-row .recurring-name-col {
  background: rgba(248, 113, 113, 0.04);
}

.recurring-inflow-row td {
  background: rgba(52, 211, 153, 0.04);
}

.recurring-inflow-row .recurring-name-col {
  background: rgba(52, 211, 153, 0.04);
}

.recurring-net-row td {
  border-top: 1px solid var(--border);
  background: rgba(96, 165, 250, 0.06);
}

.recurring-net-row .recurring-name-col {
  background: rgba(96, 165, 250, 0.06);
}

.recurring-cell.expense { color: var(--red); }
.recurring-cell.income { color: var(--green); }

/* ── Clickable Cells ── */

.recurring-cell-clickable {
  cursor: pointer;
  transition: background 0.1s;
}

.recurring-cell-clickable:hover {
  background: rgba(96, 165, 250, 0.08);
}

.recurring-cell-selected {
  background: rgba(96, 165, 250, 0.15);
  outline: 2px solid var(--accent);
  outline-offset: -2px;
  border-radius: 2px;
}

/* ── Drill-Down Table ── */

.recurring-drill-down {
  margin-top: 16px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.recurring-drill-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 14px;
  border-bottom: 1px solid var(--border);
  font-size: 13px;
  color: var(--text-primary);
}

.recurring-drill-loading,
.recurring-drill-empty {
  padding: 20px 14px;
  font-size: 13px;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: 8px;
}

.recurring-drill-table {
  width: 100%;
  border-collapse: collapse;
  font-variant-numeric: tabular-nums;
}

.recurring-drill-table thead th {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.3px;
  padding: 8px 14px;
  border-bottom: 1px solid var(--border);
  text-align: left;
}

.recurring-drill-table tbody tr {
  border-bottom: 1px solid rgba(45, 50, 68, 0.3);
  transition: background 0.1s;
}

.recurring-drill-table tbody tr:hover {
  background: var(--bg-hover);
}

.recurring-drill-date {
  font-size: 12px;
  color: var(--text-muted);
  white-space: nowrap;
  padding: 7px 14px;
  width: 80px;
}

.recurring-drill-desc {
  font-size: 13px;
  color: var(--text-primary);
  padding: 7px 14px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 400px;
}

.recurring-drill-acct {
  font-size: 12px;
  color: var(--text-secondary);
  padding: 7px 14px;
  white-space: nowrap;
}

.recurring-drill-amt {
  font-size: 13px;
  font-weight: 600;
  text-align: right;
  padding: 7px 14px;
  white-space: nowrap;
}

.recurring-drill-amt.expense { color: var(--red); }
.recurring-drill-amt.income { color: var(--green); }

.recurring-drill-cat {
  padding: 4px 14px;
  position: relative;
}

/* ══════════════════════════════════════════
   Investments Page
   ══════════════════════════════════════════ */

.inv-pct {
  font-size: 14px;
  font-weight: 500;
  margin-left: 8px;
  opacity: 0.85;
}

.inv-subtitle {
  font-size: 13px;
  color: var(--text-muted);
}

/* Holdings Table */
.inv-sortable {
  cursor: pointer;
  user-select: none;
  white-space: nowrap;
}
.inv-sortable:hover {
  color: var(--accent);
}

.inv-ticker {
  font-weight: 700;
  font-family: 'SF Mono', 'Fira Code', monospace;
  color: var(--accent);
}

.inv-name {
  max-width: 200px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.inv-type-badge {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
}

.inv-gain { color: var(--green); }
.inv-loss { color: var(--red); }

.inv-holding-row:hover {
  background: var(--bg-hover) !important;
}

/* Charts Row */
.inv-charts-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 0;
}

.inv-chart-card {
  min-height: 350px;
}

.inv-perf-controls {
  display: flex;
  gap: 4px;
}

.inv-perf-btn {
  padding: 4px 10px;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: transparent;
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 12px;
  font-weight: 600;
  transition: all 0.15s;
}

.inv-perf-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
}

.inv-perf-btn.active {
  background: var(--accent);
  border-color: var(--accent);
  color: #fff;
}

/* Transaction Filters */
.inv-txn-filters {
  display: flex;
  gap: 4px;
}

.inv-txn-filter-btn {
  padding: 4px 12px;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: transparent;
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 12px;
  transition: all 0.15s;
}

.inv-txn-filter-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
}

.inv-txn-filter-btn.active {
  background: var(--accent);
  border-color: var(--accent);
  color: #fff;
}

.inv-filter-badge {
  font-size: 11px;
  color: var(--accent);
  background: rgba(96, 165, 250, 0.1);
  padding: 2px 8px;
  border-radius: 12px;
  margin-left: 8px;
  cursor: pointer;
}

.inv-filter-badge:hover {
  background: rgba(96, 165, 250, 0.2);
}

/* Transaction Type Badges */
.inv-txn-type {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 2px 8px;
  border-radius: 4px;
  font-weight: 600;
}
.inv-txn-type.buy { background: rgba(96, 165, 250, 0.15); color: #60a5fa; }
.inv-txn-type.sell { background: rgba(248, 113, 113, 0.15); color: #f87171; }
.inv-txn-type.dividend { background: rgba(52, 211, 153, 0.15); color: #34d399; }
.inv-txn-type.dividend_reinvestment { background: rgba(52, 211, 153, 0.1); color: #34d399; }
.inv-txn-type.transfer { background: rgba(251, 191, 36, 0.15); color: #fbbf24; }
.inv-txn-type.capital_gain { background: rgba(167, 139, 250, 0.15); color: #a78bfa; }
.inv-txn-type.fee { background: rgba(248, 113, 113, 0.1); color: #f87171; }

/* Pagination */
.inv-pagination {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  padding: 12px 0 4px;
  font-size: 13px;
  color: var(--text-muted);
}

.inv-pagination button {
  padding: 4px 12px;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: transparent;
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 12px;
}

.inv-pagination button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.inv-pagination button:hover:not(:disabled) {
  border-color: var(--accent);
  color: var(--accent);
}

/* Account Management Cards */
.inv-accounts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: 12px;
}

.inv-account-card {
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 16px;
}

.inv-account-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 12px;
}

.inv-account-name {
  font-weight: 600;
  font-size: 15px;
}

.inv-account-meta {
  display: flex;
  gap: 8px;
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 2px;
}

.inv-account-type {
  text-transform: capitalize;
}

.inv-account-value {
  font-size: 20px;
  font-weight: 700;
}

.inv-account-footer {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 12px;
}

.inv-status {
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
}
.inv-status.connected { background: rgba(52, 211, 153, 0.15); color: var(--green); }
.inv-status.manual { background: rgba(96, 165, 250, 0.15); color: #60a5fa; }
.inv-status.disconnected { background: rgba(248, 113, 113, 0.15); color: var(--red); }
.inv-status.error { background: rgba(248, 113, 113, 0.15); color: var(--red); }

.inv-last-sync {
  color: var(--text-muted);
  flex: 1;
}

.inv-sync-error {
  margin-top: 8px;
  padding: 8px;
  background: var(--red-bg);
  border-radius: var(--radius);
  font-size: 12px;
  color: var(--red);
  display: flex;
  align-items: center;
  gap: 6px;
}

.btn-sm {
  padding: 4px 10px !important;
  font-size: 12px !important;
}

.inv-link-form {
  margin-top: 12px;
  padding: 16px;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.inv-link-field {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.inv-link-field label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.inv-link-field input,
.inv-link-field select {
  padding: 8px 12px;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: var(--card-bg);
  color: var(--text);
  font-size: 14px;
}

.inv-link-field input:focus,
.inv-link-field select:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 2px rgba(96, 165, 250, 0.15);
}

.inv-link-actions {
  display: flex;
  gap: 8px;
  margin-top: 4px;
}

.inv-link-actions .btn {
  font-size: 13px;
  padding: 8px 16px;
}

.inv-holding-input-row {
  display: flex;
  gap: 8px;
  margin-top: 8px;
  align-items: center;
}

.inv-holding-input-row input {
  padding: 6px 10px;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: var(--card-bg);
  color: var(--text);
  font-size: 13px;
}

.inv-holding-input-row input:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 2px rgba(96, 165, 250, 0.15);
}

@media (max-width: 900px) {
  .inv-charts-row {
    grid-template-columns: 1fr;
  }
}

/* ══════════════════════════════════════════
   Insights / Financial Advisor Page
   ══════════════════════════════════════════ */

.insights-page {
  max-width: 900px;
}

/* Trigger Card (pre-analysis) */
.insights-trigger-card {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.insights-trigger-header {
  display: flex;
  gap: 12px;
  align-items: flex-start;
}

.insights-trigger-header h3 {
  margin: 0 0 4px;
  font-size: 16px;
}

.insights-context-box {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.insights-context-box label {
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.03em;
  color: var(--text-secondary);
}

.insights-context-box textarea {
  padding: 10px 14px;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: var(--bg-primary);
  color: var(--text-primary);
  font-size: 13px;
  line-height: 1.5;
  resize: vertical;
  outline: none;
  transition: border-color 0.15s;
  font-family: inherit;
}

.insights-context-box textarea:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(96, 165, 250, 0.15);
}

.insights-context-box textarea::placeholder {
  color: var(--text-muted);
}

.insights-run-btn {
  align-self: flex-start;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  padding: 10px 20px !important;
}

.insights-analysis-footer {
  margin-top: 20px;
  padding-top: 16px;
  border-top: 1px solid var(--border);
  display: flex;
  gap: 8px;
}

/* Analysis Card */
.insights-analysis-card {
  max-height: 65vh;
  overflow-y: auto;
  scroll-behavior: smooth;
}

.insights-loading {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 40px 20px;
  color: var(--text-muted);
  font-size: 14px;
}

.insights-error {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  background: var(--red-bg);
  border-radius: var(--radius);
  color: var(--red);
  font-size: 13px;
  margin-bottom: 12px;
}

/* Rendered Analysis Content */
.insights-content {
  line-height: 1.7;
  font-size: 14px;
}

.insights-section-header {
  font-size: 17px;
  font-weight: 700;
  color: var(--accent);
  margin-top: 24px;
  margin-bottom: 10px;
  padding-bottom: 6px;
  border-bottom: 1px solid var(--border);
}

.insights-section-header:first-child {
  margin-top: 0;
}

.insights-paragraph {
  margin-bottom: 10px;
  color: var(--text-primary);
}

.insights-list {
  margin: 8px 0 14px 0;
  padding-left: 20px;
}

.insights-list li {
  margin-bottom: 6px;
  color: var(--text-primary);
  line-height: 1.6;
}

.insights-spacer {
  height: 8px;
}

.insights-amount {
  font-weight: 700;
  font-family: 'SF Mono', 'Fira Code', monospace;
  font-size: 13px;
}

.insights-amount.gain {
  color: var(--green);
}

.insights-amount.loss {
  color: var(--red);
}

.insights-cursor {
  color: var(--accent);
  animation: blink 0.8s step-end infinite;
  font-weight: 300;
}

@keyframes blink {
  50% { opacity: 0; }
}

/* Chat Section */
.insights-chat-card {
  margin-top: 0;
}

.insights-chat-header {
  margin-bottom: 16px;
}

.insights-chat-header h3 {
  font-size: 16px;
  font-weight: 600;
  margin-bottom: 4px;
}

.insights-chat-hint {
  font-size: 12px;
  color: var(--text-muted);
}

.insights-chat-thread {
  max-height: 400px;
  overflow-y: auto;
  margin-bottom: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.insights-chat-msg {
  display: flex;
  gap: 10px;
  align-items: flex-start;
}

.insights-chat-msg.user {
  flex-direction: row-reverse;
}

.insights-chat-avatar {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  background: var(--bg-hover);
  color: var(--text-muted);
}

.insights-chat-msg.user .insights-chat-avatar {
  background: var(--accent);
  color: #fff;
}

.insights-chat-bubble {
  max-width: 80%;
  padding: 10px 14px;
  border-radius: var(--radius-lg);
  font-size: 14px;
  line-height: 1.6;
}

.insights-chat-msg.assistant .insights-chat-bubble {
  background: var(--bg-primary);
  border: 1px solid var(--border);
}

.insights-chat-msg.user .insights-chat-bubble {
  background: var(--accent);
  color: #fff;
  border-radius: var(--radius-lg) var(--radius-lg) 4px var(--radius-lg);
}

.insights-chat-bubble .insights-section-header {
  font-size: 14px;
  margin-top: 12px;
}

.insights-chat-bubble .insights-paragraph {
  margin-bottom: 6px;
}

.insights-chat-bubble .insights-list {
  margin: 4px 0 8px;
}

/* Chat Input */
.insights-chat-input-row {
  display: flex;
  gap: 8px;
  align-items: center;
}

.insights-chat-input {
  flex: 1;
  padding: 10px 14px;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  color: var(--text-primary);
  font-size: 14px;
  outline: none;
  transition: border-color 0.15s;
}

.insights-chat-input:focus {
  border-color: var(--accent);
}

.insights-chat-input::placeholder {
  color: var(--text-muted);
}

.insights-send-btn {
  width: 40px;
  height: 40px;
  padding: 0 !important;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50% !important;
  flex-shrink: 0;
}

.insights-send-btn:disabled {
  opacity: 0.4;
}

/* ═══════════════════════════════════════════════════════════
   SPLASH SCREEN & SETUP WIZARD
   ═══════════════════════════════════════════════════════════ */

/* ── Splash Screen ── */
.splash-screen {
  position: fixed;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  background: #0a0d12;
  animation: splashFadeIn 0.4s ease;
}

.splash-screen::before {
  content: '';
  position: absolute;
  width: 600px;
  height: 600px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(92, 224, 184, 0.08) 0%, transparent 70%);
  pointer-events: none;
}

.splash-text {
  text-align: center;
  position: relative;
  z-index: 1;
}

.splash-line {
  display: block;
  font-size: clamp(3rem, 8vw, 6rem);
  font-weight: 900;
  line-height: 1.1;
  letter-spacing: -0.03em;
}

.splash-line1 { color: #e8eaed; }
.splash-line2 { color: #5ce0b8; }

.splash-word {
  display: inline-block;
  opacity: 0;
  transform: translateY(40px) scale(0.9);
  animation: splashWord 0.7s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.splash-word-teal {
  background: linear-gradient(135deg, #5ce0b8 0%, #3ecfaa 40%, #7af0d0 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.splash-line1 .splash-word:nth-child(1) { animation-delay: 0.2s; }
.splash-line1 .splash-word:nth-child(2) { animation-delay: 0.4s; }
.splash-line2 .splash-word:nth-child(1) { animation-delay: 0.7s; }
.splash-line2 .splash-word:nth-child(2) { animation-delay: 0.9s; }

@keyframes splashWord {
  0% { opacity: 0; transform: translateY(40px) scale(0.9); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes splashFadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.splash-cta {
  margin-top: 3.5rem;
  position: relative;
  z-index: 1;
  opacity: 0;
  transform: translateY(20px);
  animation: splashFadeUp 0.6s ease forwards;
  animation-delay: 1.5s;
}

@keyframes splashFadeUp {
  to { opacity: 1; transform: translateY(0); }
}

.splash-btn {
  background: transparent;
  color: rgba(255, 255, 255, 0.7);
  border: 1px solid rgba(255, 255, 255, 0.15);
  padding: 14px 48px;
  font-size: 1rem;
  font-weight: 600;
  font-family: inherit;
  border-radius: 12px;
  cursor: pointer;
  letter-spacing: 0.02em;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

.splash-btn:hover {
  color: #fff;
  border-color: rgba(92, 224, 184, 0.4);
  background: rgba(92, 224, 184, 0.08);
  box-shadow: 0 0 30px rgba(92, 224, 184, 0.1);
  transform: translateY(-1px);
}

/* Floating particles */
.splash-particle {
  position: absolute;
  width: 2px;
  height: 2px;
  background: rgba(92, 224, 184, 0.3);
  border-radius: 50%;
  animation: splashFloat linear infinite;
}

@keyframes splashFloat {
  0% { transform: translateY(100vh) scale(0); opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { transform: translateY(-10vh) scale(1); opacity: 0; }
}

/* ── Setup Wizard ── */
.wiz-container {
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: #0a0d12;
  animation: wizFadeIn 0.6s ease;
}

@keyframes wizFadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Progress bar */
.wiz-progress {
  padding: 24px 32px 0;
  display: flex;
  align-items: center;
  gap: 8px;
}

.wiz-progress-step {
  flex: 1;
  height: 3px;
  background: rgba(255, 255, 255, 0.08);
  border-radius: 2px;
  transition: background 0.4s ease;
}

.wiz-progress-step.active,
.wiz-progress-step.completed {
  background: #5ce0b8;
}

.wiz-step-count {
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.3);
  font-weight: 500;
  margin-left: 12px;
  min-width: 32px;
}

/* Step content */
.wiz-body {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  position: relative;
  overflow: hidden;
}

.wiz-step {
  position: absolute;
  width: 100%;
  max-width: 520px;
  padding: 0 2rem;
  opacity: 0;
  transform: translateX(60px);
  transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
  pointer-events: none;
}

.wiz-step.active {
  opacity: 1;
  transform: translateX(0);
  pointer-events: auto;
}

.wiz-step.exit-left {
  opacity: 0;
  transform: translateX(-60px);
}

/* Step icons */
.wiz-icon {
  width: 56px;
  height: 56px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 1.5rem;
}

.wiz-icon svg {
  width: 28px;
  height: 28px;
}

.wiz-icon.teal { background: rgba(92, 224, 184, 0.12); color: #5ce0b8; }
.wiz-icon.blue { background: rgba(96, 165, 250, 0.12); color: #60a5fa; }
.wiz-icon.purple { background: rgba(167, 139, 250, 0.12); color: #a78bfa; }
.wiz-icon.amber { background: rgba(251, 191, 36, 0.12); color: #fbbf24; }

/* Typography */
.wiz-title {
  font-size: 1.6rem;
  font-weight: 800;
  letter-spacing: -0.02em;
  margin-bottom: 0.5rem;
  color: #e8eaed;
}

.wiz-subtitle {
  color: rgba(255, 255, 255, 0.45);
  font-size: 0.95rem;
  line-height: 1.6;
  margin-bottom: 2rem;
}

/* Input */
.wiz-input-group { margin-bottom: 1rem; }

.wiz-input-group label {
  display: block;
  font-size: 0.75rem;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.5);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 6px;
}

.wiz-text-input {
  width: 100%;
  padding: 12px 16px;
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  color: #e8eaed;
  font-family: inherit;
  font-size: 0.9rem;
  outline: none;
  transition: border-color 0.2s ease;
}

.wiz-text-input:focus {
  border-color: rgba(92, 224, 184, 0.5);
}

.wiz-text-input::placeholder {
  color: rgba(255, 255, 255, 0.2);
}

/* Card grid */
.wiz-card-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin-bottom: 1.5rem;
}

.wiz-card-grid.single-col {
  grid-template-columns: 1fr;
}

.wiz-select-card {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 12px;
  padding: 14px 16px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 12px;
}

.wiz-select-card:hover {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.15);
}

.wiz-select-card.selected {
  background: rgba(92, 224, 184, 0.06);
  border-color: rgba(92, 224, 184, 0.4);
}

/* Radio */
.wiz-card-radio {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  border: 2px solid rgba(255, 255, 255, 0.2);
  flex-shrink: 0;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.wiz-select-card.selected .wiz-card-radio {
  border-color: #5ce0b8;
  background: #5ce0b8;
}

.wiz-select-card.selected .wiz-card-radio::after {
  content: '';
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #0a0d12;
}

/* Checkbox */
.wiz-card-check {
  width: 18px;
  height: 18px;
  border-radius: 5px;
  border: 2px solid rgba(255, 255, 255, 0.2);
  flex-shrink: 0;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.wiz-select-card.selected .wiz-card-check {
  border-color: #5ce0b8;
  background: #5ce0b8;
}

.wiz-select-card.selected .wiz-card-check::after {
  content: '';
  width: 10px;
  height: 10px;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M2.5 6L5 8.5L9.5 3.5' stroke='%230a0d12' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  background-size: contain;
}

.wiz-card-label {
  font-size: 0.85rem;
  font-weight: 500;
  color: #e8eaed;
}

.wiz-card-label small {
  display: block;
  color: rgba(255, 255, 255, 0.35);
  font-weight: 400;
  font-size: 0.75rem;
  margin-top: 2px;
}

/* Toggle switch */
.wiz-toggle-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.wiz-toggle-row:last-child { border-bottom: none; }

.wiz-toggle-label {
  font-size: 0.9rem;
  font-weight: 500;
  color: #e8eaed;
}

.wiz-toggle-label small {
  display: block;
  color: rgba(255, 255, 255, 0.35);
  font-weight: 400;
  font-size: 0.78rem;
  margin-top: 2px;
}

.wiz-toggle {
  width: 44px;
  height: 24px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  cursor: pointer;
  position: relative;
  flex-shrink: 0;
  margin-left: 16px;
  transition: background 0.2s ease;
}

.wiz-toggle.on {
  background: #5ce0b8;
}

.wiz-toggle::after {
  content: '';
  position: absolute;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #fff;
  top: 3px;
  left: 3px;
  transition: transform 0.2s ease;
}

.wiz-toggle.on::after {
  transform: translateX(20px);
}

/* Footer */
.wiz-footer {
  padding: 20px 32px 32px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.wiz-btn {
  padding: 12px 32px;
  border-radius: 10px;
  font-size: 0.9rem;
  font-weight: 600;
  font-family: inherit;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
}

.wiz-btn-ghost {
  background: transparent;
  color: rgba(255, 255, 255, 0.4);
  padding: 12px 20px;
}

.wiz-btn-ghost:hover {
  color: rgba(255, 255, 255, 0.7);
}

.wiz-btn-primary {
  background: #5ce0b8;
  color: #0a0d12;
}

.wiz-btn-primary:hover {
  background: #7af0d0;
  transform: translateY(-1px);
  box-shadow: 0 4px 20px rgba(92, 224, 184, 0.25);
}

.wiz-btn-primary:active {
  transform: translateY(0);
}

/* Completion */
.wiz-completion-check {
  width: 72px;
  height: 72px;
  border-radius: 50%;
  background: rgba(74, 222, 128, 0.12);
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 1.5rem;
}

.wiz-completion-check svg {
  width: 36px;
  height: 36px;
  color: #4ade80;
  stroke-dasharray: 60;
  stroke-dashoffset: 60;
  animation: wizDrawCheck 0.6s ease forwards 0.3s;
}

@keyframes wizDrawCheck {
  to { stroke-dashoffset: 0; }
}

.wiz-confetti-container {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

.wiz-confetti {
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 2px;
  animation: wizConfettiFall 2.5s ease forwards;
}

@keyframes wizConfettiFall {
  0% { transform: translateY(-20px) rotate(0deg); opacity: 1; }
  100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
}
